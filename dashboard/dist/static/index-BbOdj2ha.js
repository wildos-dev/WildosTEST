import{r as h,j as t}from"./react-core-Bcdk_OeX.js";import{a as g,b5 as j,bd as y,b8 as n,am as T,S as C,C as b,be as k,b as w,c as v,bf as S}from"./index-DRsjEK3q.js";import"./layout-Y81SaLgb.js";import{d as D}from"./react-ecosystem-6S3Qhx2r.js";import"./dnd-kit-BufO2FBr.js";import{u as F}from"./query-BGTG4bZD.js";import{U as L}from"./index.lazy-BYjQcqvb.js";import{B as N,C as A,Y as U,X as $,b as B}from"./recharts-D-jZI7XS.js";import"./monaco-D6sUsa5W.js";import"./router-DsiC1lhN.js";import"./state-BNTuQEE6.js";import"./styling-utils--BulIq_u.js";import"./network-3TAtD9nM.js";import"./forms-BplYsbWl.js";import"./search-BP5e7l94.js";import"./date-utils-hmeNWewA.js";import"./table-DQ5QIWK1.js";import"./index-BIixQq-_.js";import"./subscription-settings.query-BOVri0cl.js";const I={total:0,usages:[]};async function M({queryKey:a}){const e=a.length>3&&a[3]?a[3]:{};return await g("system/stats/traffic",{query:{start:e.start,end:e.end}}).then(r=>r)}const R=({start:a,end:e})=>F({queryKey:["system","stats","traffic",{start:a,end:e}],queryFn:M,refetchInterval:1e3*60*5,initialData:I}),st=()=>{const{t:a}=D(),[e,r]=h.useState("1d"),{start:l,end:m}=j(e),{data:c,isPending:f}=R({start:l,end:m}),u=y(c?.usages||[]),[p,d]=n(c?.total||0),x={traffic:{label:a("metrics.traffic"),color:"hsl(var(--chart-1))"}};return t.jsx(T,{Component:t.jsx(C,{title:t.jsx("div",{className:"hstack justify-between w-full",children:a("page.home.total-traffics.title")}),description:a("page.home.total-traffics.desc"),options:t.jsxs("div",{className:"vstack justify-end w-full",children:[t.jsxs("span",{className:"text-lg leading-none sm:text-2xl w-full",children:[p," ",d]}),t.jsx("span",{className:"text-sm flex justify-end  text-muted-foreground w-full",children:a("total")})]}),footer:t.jsx(S,{timeRange:e,setTimeRange:r}),children:t.jsx(b,{config:x,className:"mx-auto w-full aspect-[4/3] md:aspect-[16/9]",children:t.jsxs(N,{accessibilityLayer:!0,data:u,margin:{left:12,top:13,right:12},children:[t.jsx(A,{vertical:!1}),t.jsx(U,{tickLine:!1,axisLine:!1,tickMargin:8,tickFormatter:s=>{const[i,o]=n(s);return`${i} ${o}`}}),t.jsx($,{dataKey:"datetime",tickLine:!1,axisLine:!1,tickMargin:8,tickFormatter:s=>k(String(s),e)}),t.jsx(w,{content:t.jsx(v,{indicator:"line",labelFormatter:s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric"}),valueFormatter:s=>{const[i,o]=n(s);return`${i} ${o}`}})}),t.jsx(B,{dataKey:"traffic",fill:"var(--color-traffic)"})]})})}),Skeleton:t.jsx(L,{}),isFetching:f})};export{st as TotalTrafficsWidget};
