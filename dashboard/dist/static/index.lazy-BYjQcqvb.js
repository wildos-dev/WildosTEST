const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/index-BbOdj2ha.js","static/react-core-Bcdk_OeX.js","static/monaco-D6sUsa5W.js","static/index-DRsjEK3q.js","static/router-DsiC1lhN.js","static/recharts-D-jZI7XS.js","static/styling-utils--BulIq_u.js","static/react-ecosystem-6S3Qhx2r.js","static/state-BNTuQEE6.js","static/network-3TAtD9nM.js","static/query-BGTG4bZD.js","static/forms-BplYsbWl.js","static/layout-Y81SaLgb.js","static/date-utils-hmeNWewA.js","static/search-BP5e7l94.js","static/dnd-kit-BufO2FBr.js","static/table-DQ5QIWK1.js","static/index-DPopYEv1.css","static/index-BIixQq-_.js","static/subscription-settings.query-BOVri0cl.js"])))=>i.map(i=>d[i]);
import{j as e,r as T}from"./react-core-Bcdk_OeX.js";import{L as Z,h as de}from"./router-DsiC1lhN.js";import{U as oe,a as y,S as h,I as c,u as me,C as A,b as C,c as F,d as B,e as P,f as K,Q as q,g as xe,h as ee,B as M,i as v,j as se,k as te,l as D,_ as ue,m as he,W as k}from"./index-DRsjEK3q.js";import"./layout-Y81SaLgb.js";import{d as p}from"./react-ecosystem-6S3Qhx2r.js";import"./dnd-kit-BufO2FBr.js";import{P as ge}from"./index-BIixQq-_.js";import{u as _,e as Q}from"./query-BGTG4bZD.js";import{u as fe}from"./subscription-settings.query-BOVri0cl.js";import{P as $,c as O,L as H,B as ae,X as z,Y as X,b as re,R as ne,d as je,e as J}from"./recharts-D-jZI7XS.js";const pe={total:0,active:0,on_hold:0,expired:0,limited:0,online:0,recent_subscription_updates:[]};async function Ne(){return await y("system/stats/users").then(s=>s)}const ve="stats",G=()=>_({queryKey:[ve,oe],queryFn:Ne,initialData:pe}),ye=({total:s})=>{const{t}=p();return e.jsx(h,{title:e.jsxs(e.Fragment,{children:[" ",e.jsx(c,{name:"Shield"})," ",t("admins")," "]}),description:t("page.home.admins-stats.desc","Total number of admin users"),className:"h-full",children:e.jsx("div",{className:"flex flex-col items-center justify-center py-4 sm:py-8",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx(c,{name:"Users",className:"h-8 w-8 sm:h-12 sm:w-12 text-muted-foreground"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl sm:text-4xl font-bold text-foreground",children:s||0}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:t("total-admins","Total Admins")})]})]})})})},be={total:0};async function we(){return await y("system/stats/admins").then(s=>s)}const ke="admins-stats",le=()=>_({queryKey:[ke],queryFn:we,initialData:be}),Se=s=>({active:{label:s("active"),color:"#3b82f6"},online:{label:s("online"),color:"#10b981"},expired:{label:s("expired"),color:"#4b5563"},onHold:{label:s("on_hold"),color:"#A855F7"},limited:{label:s("limited"),color:"#ef4444"}}),Te=({total:s,limited:t,active:o,expired:d,on_hold:m,online:n})=>{const{t:i,i18n:r}=p(),a=!me("md"),l=T.useMemo(()=>Se(i),[r.language]),u=[{type:"limited",total:t,fill:"var(--color-limited)"},{type:"active",total:o,fill:"var(--color-active)"},{type:"expired",total:d,fill:"var(--color-expired)"},{type:"onHold",total:m,fill:"var(--color-onHold)"},{type:"online",total:n,fill:"var(--color-online)"}];return e.jsx(h,{title:e.jsxs(e.Fragment,{children:[" ",e.jsx(c,{name:"Users",className:"h-5 w-5"})," ",i("users")," "]}),description:i("page.home.users-stats.desc"),className:"w-full h-full",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[a&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"text-center p-2 bg-muted/50 rounded",children:[e.jsx("div",{className:"font-semibold text-lg",children:s||0}),e.jsx("div",{className:"text-muted-foreground",children:i("total")})]}),e.jsxs("div",{className:"text-center p-2 bg-muted/50 rounded",children:[e.jsx("div",{className:"font-semibold text-lg text-green-600",children:n||0}),e.jsx("div",{className:"text-muted-foreground",children:i("online")})]})]}),e.jsx(A,{config:l,className:a?"mx-auto w-full aspect-[4/3]":"mx-auto aspect-square w-full",children:e.jsxs($,{children:[e.jsx(C,{cursor:!1,content:e.jsx(F,{hideLabel:!0})}),e.jsx(O,{data:u,dataKey:"total",nameKey:"type",innerRadius:a?40:60,strokeWidth:a?3:5,children:e.jsx(H,{content:({viewBox:g})=>{if(g&&"cx"in g&&"cy"in g)return e.jsxs("text",{x:g.cx,y:g.cy,textAnchor:"middle",dominantBaseline:"middle",children:[e.jsx("tspan",{x:g.cx,y:g.cy,className:`fill-foreground font-bold ${a?"text-xl":"text-3xl"}`,children:s||0}),e.jsx("tspan",{x:g.cx,y:(g.cy||0)+(a?16:24),className:`fill-muted-foreground ${a?"text-xs":"text-sm"}`,children:i("users")})]})}})}),e.jsx(B,{className:a?"flex -translate-y-2 flex-wrap gap-1 [&>*]:basis-1/3 [&>*]:justify-center text-xs":"flex -translate-y-2 flex-wrap gap-2 [&>*]:basis-1/5 [&>*]:justify-center text-md",content:e.jsx(P,{})})]})})]})})},Ae={total:0,healthy:0,unhealthy:0};async function Ce(){return await y("system/stats/nodes").then(s=>s)}const Le="nodes-stats",ie=()=>_({queryKey:[Le],queryFn:Ce,initialData:Ae}),V=()=>xe({page:1,size:1e3,sortBy:"created_at",desc:!1}),Y=()=>{const{data:s}=V(),t=s?.entities||[],{handleError:o}=K({showToast:!1}),d=Q({queries:t.map(n=>({queryKey:["nodes",n.id,"host","metrics"],queryFn:async()=>{try{return await y(`/nodes/${n.id}/host/metrics`)}catch(i){return o(i,`Host metrics for node ${n.name||n.id}`),null}},refetchInterval:q.FREQUENT,initialData:null}))}),m={totalNodes:t.length,activeNodes:0,averageCpuUsage:0,averageMemoryUsage:0,averageDiskUsage:0,totalNetworkRx:"0",totalNetworkTx:"0",criticalNodes:0,healthyNodes:0};if(d.length>0){const n=d.map(i=>i.data).filter(i=>i!==null);if(n.length>0){m.activeNodes=n.length,m.averageCpuUsage=n.reduce((a,l)=>a+(l?.cpu?.usage||0),0)/n.length,m.averageMemoryUsage=n.reduce((a,l)=>a+(l?.memory?.usagePercent||0),0)/n.length,m.averageDiskUsage=n.reduce((a,l)=>a+(l?.disk?.rootUsagePercent||0),0)/n.length;let i=0,r=0;n.forEach(a=>{a?.network?.interfaces&&Array.isArray(a.network.interfaces)&&a.network.interfaces.forEach(l=>{l&&(i+=parseInt(l.rxBytes)||0,r+=parseInt(l.txBytes)||0)})}),m.totalNetworkRx=i.toString(),m.totalNetworkTx=r.toString(),n.forEach(a=>{a?.cpu&&a?.memory&&a?.disk&&((a.cpu.usage||0)>80||(a.memory.usagePercent||0)>80||(a.disk.rootUsagePercent||0)>80?m.criticalNodes++:m.healthyNodes++)})}}return{data:m,isLoading:d.some(n=>n.isLoading),error:d.find(n=>n.error)?.error||null}},Ue=(s=24)=>{const{data:t}=V(),o=t?.entities||[],d=Date.now()-s*60*60*1e3,{handleError:m}=K({showToast:!1}),n=Q({queries:o.map(r=>({queryKey:["nodes",r.id,"peak","events",d],queryFn:async()=>{try{const a=new URLSearchParams;a.append("since_ms",d.toString());const l=`/nodes/${r.id}/peak/events?${a.toString()}`;return await y(l)}catch(a){return m(a,`Peak events for node ${r.name||r.id}`),[]}},refetchInterval:q.NORMAL,initialData:[]}))});return{data:n.flatMap(r=>r.data||[]).sort((r,a)=>a.started_at_ms-r.started_at_ms).slice(0,50),isLoading:n.some(r=>r.isLoading),error:n.find(r=>r.error)?.error||null}},De=(s=5)=>{const{data:t}=V(),o=t?.entities||[],{handleError:d}=K({showToast:!1}),m=new Date,n=new Date(m.getTime()-24*60*60*1e3),i=Q({queries:o.map(l=>({queryKey:["nodes",l.id,"usage",{start:n.toISOString(),end:m.toISOString()}],queryFn:async()=>{try{return await y(`/nodes/${l.id}/usage`,{query:{start:n.toISOString(),end:m.toISOString()}})}catch(u){return d(u,`Usage data for node ${l.name||l.id}`),{total:0,usages:[]}}},refetchInterval:q.SLOW,initialData:{total:0,usages:[]}}))}),r=i.map((l,u)=>{const g=o[u];if(!g)return null;const b=l.data?.total||0;return{nodeId:g.id||0,nodeName:g.name||`Node ${u+1}`,totalTraffic:b,uplink:g.uplink||0,downlink:g.downlink||0,usagePercent:0}}).filter(l=>l!==null).sort((l,u)=>u.totalTraffic-l.totalTraffic).slice(0,s),a=r[0]?.totalTraffic||1;return r.forEach(l=>{l.usagePercent=l.totalTraffic/a*100}),{data:r,isLoading:i.some(l=>l.isLoading),error:i.find(l=>l.error)?.error||null}},Me=()=>{const{data:s,isLoading:t,error:o}=Y();return{data:{totalRxBytes:s?.totalNetworkRx||"0",totalTxBytes:s?.totalNetworkTx||"0",activeInterfaces:(s?.activeNodes||0)*2,averageSpeed:"1000",timestamp:Date.now()},isLoading:t,error:o}},W={totalBackends:0,runningBackends:0,stoppedBackends:0,totalNodes:0,nodesWithData:0};async function _e(){return await y("nodes",{query:{page:1,size:1e3}}).then(s=>s.items||[])}async function Re(){try{const s=await _e();if(!s||s.length===0)return W;const t=s.map(async i=>{try{const r=await y(`nodes/${i.id}/backends/stats`);return{nodeId:i.id,stats:r}}catch{return{nodeId:i.id,stats:null}}}),o=await Promise.all(t);let d=0,m=0,n=0;return o.forEach(({stats:i})=>{i&&typeof i=="object"&&(n++,Object.values(i).forEach(r=>{d++,r?.running===!0&&m++}))}),{totalBackends:d,runningBackends:m,stoppedBackends:d-m,totalNodes:s.length,nodesWithData:n}}catch{return W}}const Ee="all-backends-stats",We=()=>_({queryKey:[Ee],queryFn:Re,initialData:W,refetchInterval:1e3*10}),Ie=s=>({healthy:{label:s("healthy"),color:"#10b981"},unhealthy:{label:s("unhealthy"),color:"#ef4444"}}),Fe=({total:s,healthy:t,unhealthy:o})=>{const{t:d,i18n:m}=p(),n=T.useMemo(()=>Ie(d),[m.language]),i=[{type:"healthy",total:t,fill:"var(--color-healthy)"},{type:"unhealthy",total:o,fill:"var(--color-unhealthy)"}];return e.jsx(h,{title:e.jsxs(e.Fragment,{children:[" ",e.jsx(c,{name:"Server"})," ",d("nodes")," "]}),description:d("page.home.nodes-stats.desc"),className:"h-full",children:e.jsx(A,{config:n,className:"mx-auto aspect-square w-full",children:e.jsxs($,{children:[e.jsx(C,{cursor:!1,content:e.jsx(F,{hideLabel:!0})}),e.jsx(O,{data:i,dataKey:"total",nameKey:"type",innerRadius:60,strokeWidth:5,children:e.jsx(H,{content:({viewBox:r})=>{if(r&&"cx"in r&&"cy"in r)return e.jsxs("text",{x:r.cx,y:r.cy,textAnchor:"middle",dominantBaseline:"middle",children:[e.jsx("tspan",{x:r.cx,y:r.cy,className:"fill-foreground text-3xl font-bold",children:s||0}),e.jsx("tspan",{x:r.cx,y:(r.cy||0)+24,className:"fill-muted-foreground",children:d("nodes")})]})}})}),e.jsx(B,{className:"flex -translate-y-2 flex-wrap gap-2 [&>*]:basis-1/5 [&>*]:justify-center text-md",content:e.jsx(P,{})})]})})})},Be={running:{label:"Running",color:"#10b981"},stopped:{label:"Stopped",color:"#ef4444"}},Pe=({totalBackends:s,runningBackends:t,stoppedBackends:o,totalNodes:d,nodesWithData:m})=>{const{t:n}=p(),i=[{type:"running",total:t,fill:"var(--color-running)"},{type:"stopped",total:o,fill:"var(--color-stopped)"}];return e.jsx(h,{title:e.jsxs(e.Fragment,{children:[" ",e.jsx(c,{name:"Layers"})," ",n("all-backends","All Backends")," "]}),description:n("page.home.all-backends-stats.desc","Backend services status across all nodes"),className:"h-full",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(A,{config:Be,className:"mx-auto aspect-square min-h-[250px] w-full",children:e.jsxs($,{children:[e.jsx(C,{cursor:!1,content:e.jsx(F,{hideLabel:!0})}),e.jsx(O,{data:i,dataKey:"total",nameKey:"type",innerRadius:50,strokeWidth:5,children:e.jsx(H,{content:({viewBox:r})=>{if(r&&"cx"in r&&"cy"in r)return e.jsxs("text",{x:r.cx,y:r.cy,textAnchor:"middle",dominantBaseline:"middle",children:[e.jsx("tspan",{x:r.cx,y:r.cy,className:"fill-foreground text-2xl font-bold",children:s||0}),e.jsx("tspan",{x:r.cx,y:(r.cy||0)+20,className:"fill-muted-foreground text-sm",children:n("backends","Backends")})]})}})}),e.jsx(B,{className:"flex -translate-y-2 flex-wrap gap-2 [&>*]:basis-1/3 [&>*]:justify-center text-sm",content:e.jsx(P,{})})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"text-center p-2 rounded bg-muted/30",children:[e.jsxs("div",{className:"font-semibold text-foreground",children:[m,"/",d]}),e.jsx("div",{className:"text-muted-foreground",children:n("active-nodes","Active Nodes")})]}),e.jsxs("div",{className:"text-center p-2 rounded bg-muted/30",children:[e.jsx("div",{className:"font-semibold text-green-600",children:t}),e.jsx("div",{className:"text-muted-foreground",children:n("running","Running")})]})]})]})})},Ke={cpu:{label:"CPU",color:"#3b82f6"},memory:{label:"Memory",color:"#10b981"},disk:{label:"Disk",color:"#f59e0b"}},qe=()=>{const{t:s}=p(),{data:t,isLoading:o,error:d}=Y();if(d)return e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(c,{name:"Monitor"})," ",s("host-system-metrics","Host System Metrics")]}),description:s("host-system-metrics.desc","Aggregated system metrics across all nodes"),className:"h-full",children:e.jsx("div",{className:"text-center text-muted-foreground p-4",children:s("error-loading-metrics","Error loading system metrics")})});if(o)return e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(c,{name:"Monitor"})," ",s("host-system-metrics","Host System Metrics")]}),description:s("host-system-metrics.desc","Aggregated system metrics across all nodes"),className:"h-full",children:e.jsx("div",{className:"text-center text-muted-foreground p-4",children:s("loading","Loading...")})});const m=[{name:s("cpu","CPU"),value:Math.round(t.averageCpuUsage),fill:"var(--color-cpu)",icon:i=>e.jsx(c,{name:"Activity",...i})},{name:s("memory","Memory"),value:Math.round(t.averageMemoryUsage),fill:"var(--color-memory)",icon:i=>e.jsx(c,{name:"Activity",...i})},{name:s("disk","Disk"),value:Math.round(t.averageDiskUsage),fill:"var(--color-disk)",icon:i=>e.jsx(c,{name:"HardDrive",...i})}],n=i=>{const r=parseInt(i)||0,a=["B","KB","MB","GB","TB"];if(r===0)return"0 B";const l=Math.floor(Math.log(r)/Math.log(1024));return Math.round(r/Math.pow(1024,l)*100)/100+" "+a[l]};return e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(c,{name:"Monitor"})," ",s("host-system-metrics","Host System Metrics")]}),description:s("host-system-metrics.desc","Aggregated system metrics across all nodes"),className:"h-full",children:e.jsxs("div",{className:"flex flex-col gap-6 w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("h4",{className:"text-sm font-medium mb-3 text-muted-foreground",children:s("average-resource-usage","Average Resource Usage (%)")}),e.jsx(A,{config:Ke,className:"mx-auto w-full aspect-[5/3]",children:e.jsxs(ae,{data:m,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(z,{dataKey:"name",axisLine:!1,tickLine:!1,className:"text-xs fill-muted-foreground"}),e.jsx(X,{domain:[0,100],axisLine:!1,tickLine:!1,className:"text-xs fill-muted-foreground"}),e.jsx(C,{content:({active:i,payload:r})=>i&&r&&r.length?e.jsx("div",{className:"bg-background border rounded p-2 shadow-md",children:e.jsxs("p",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium",children:[r[0].payload.name,":"]}),e.jsxs("span",{className:"ml-1",children:[r[0].value,"%"]})]})}):null}),e.jsx(re,{dataKey:"value",radius:4})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[e.jsxs("div",{className:"text-center p-3 rounded bg-muted/30",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(c,{name:"Monitor",className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"font-semibold text-foreground",children:[t.activeNodes,"/",t.totalNodes]}),e.jsx("div",{className:"text-muted-foreground",children:s("active-nodes","Active Nodes")})]}),e.jsxs("div",{className:"text-center p-3 rounded bg-muted/30",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(c,{name:"Activity",className:"h-4 w-4 text-green-600"})}),e.jsx("div",{className:"font-semibold text-green-600",children:t.healthyNodes}),e.jsx("div",{className:"text-muted-foreground",children:s("healthy","Healthy")})]}),e.jsxs("div",{className:"text-center p-3 rounded bg-muted/30",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(c,{name:"Activity",className:"h-4 w-4 text-red-600"})}),e.jsx("div",{className:"font-semibold text-red-600",children:t.criticalNodes}),e.jsx("div",{className:"text-muted-foreground",children:s("critical","Critical")})]}),e.jsxs("div",{className:"text-center p-3 rounded bg-muted/30",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(c,{name:"Network",className:"h-4 w-4 text-muted-foreground"})}),e.jsx("div",{className:"font-semibold text-foreground",children:n(t.totalNetworkTx)}),e.jsx("div",{className:"text-muted-foreground",children:s("total-tx","Total TX")})]})]})]})})},Qe=s=>{switch(s){case"CPU":case"MEMORY":return t=>e.jsx(c,{name:"Activity",...t});case"DISK":return t=>e.jsx(c,{name:"Server",...t});case"NETWORK":return t=>e.jsx(c,{name:"Activity",...t});case"BACKEND":return t=>e.jsx(c,{name:"Server",...t});default:return t=>e.jsx(c,{name:"AlertTriangle",...t})}},I=s=>{switch(s){case"CPU":return"text-blue-600 bg-blue-100";case"MEMORY":return"text-green-600 bg-green-100";case"DISK":return"text-yellow-600 bg-yellow-100";case"NETWORK":return"text-purple-600 bg-purple-100";case"BACKEND":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},$e=s=>{switch(s){case"CRITICAL":return"text-red-600 bg-red-100";case"HIGH":return"text-orange-600 bg-orange-100";default:return"text-yellow-600 bg-yellow-100"}},Oe=s=>{const t=new Date(s),d=Math.floor((new Date().getTime()-t.getTime())/(1e3*60));return d<1?"Just now":d<60?`${d}m ago`:d<1440?`${Math.floor(d/60)}h ago`:t.toLocaleDateString()},He=({event:s})=>{const t=Qe(s.category),o=s.resolved_at_ms!==void 0;return e.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg border ${o?"opacity-60":""}`,children:[e.jsx("div",{className:`p-2 rounded-full ${I(s.category)}`,children:e.jsx(t,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"secondary",className:`text-xs ${I(s.category)}`,children:s.category}),e.jsx(M,{variant:"outline",className:`text-xs ${$e(s.level)}`,children:s.level}),o&&e.jsx(M,{variant:"outline",className:"text-xs text-green-600 bg-green-100",children:"RESOLVED"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(t,{name:"Clock",className:"h-3 w-3"}),Oe(s.started_at_ms)]})]}),e.jsxs("div",{className:"text-sm text-foreground mb-1",children:[e.jsxs("span",{className:"font-medium",children:["Node ",s.node_id]}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsx("span",{children:s.metric})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Value: ",e.jsx("span",{className:"font-medium",children:s.value}),s.threshold&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-2",children:"•"}),"Threshold: ",e.jsx("span",{className:"font-medium",children:s.threshold})]})]}),s.context_json&&Object.keys(s.context_json).length>0&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:e.jsxs("details",{className:"cursor-pointer",children:[e.jsx("summary",{className:"hover:text-foreground",children:"Context"}),e.jsx("pre",{className:"mt-1 text-xs bg-muted/50 p-2 rounded",children:JSON.stringify(s.context_json,null,2)})]})})]})]})},ze=()=>{const{t:s}=p(),{data:t,isLoading:o,error:d}=Ue(24);if(d)return e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(c,{name:"AlertTriangle"})," ",s("peak-events","Peak Events")]}),description:s("peak-events.desc","Critical monitoring events from all nodes"),className:"h-full",children:e.jsx("div",{className:"text-center text-muted-foreground p-4",children:s("error-loading-events","Error loading peak events")})});if(o)return e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(c,{name:"AlertTriangle"})," ",s("peak-events","Peak Events")]}),description:s("peak-events.desc","Critical monitoring events from all nodes"),className:"h-full",children:e.jsx("div",{className:"text-center text-muted-foreground p-4",children:s("loading","Loading...")})});const m=t.filter(a=>a.resolved_at_ms===void 0),n=t.filter(a=>a.resolved_at_ms!==void 0),i=t.reduce((a,l)=>(a[l.category]=(a[l.category]||0)+1,a),{}),r=t.reduce((a,l)=>(a[l.level]=(a[l.level]||0)+1,a),{});return e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(v.AlertTriangle,{})," ",s("peak-events","Peak Events")]}),description:s("peak-events.desc","Critical monitoring events from all nodes"),className:"h-full",children:e.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs",children:[e.jsxs("div",{className:"text-center p-2 rounded bg-red-100",children:[e.jsx("div",{className:"font-semibold text-red-600",children:m.length}),e.jsx("div",{className:"text-red-600",children:s("active","Active")})]}),e.jsxs("div",{className:"text-center p-2 rounded bg-green-100",children:[e.jsx("div",{className:"font-semibold text-green-600",children:n.length}),e.jsx("div",{className:"text-green-600",children:s("resolved","Resolved")})]}),e.jsxs("div",{className:"text-center p-2 rounded bg-orange-100",children:[e.jsx("div",{className:"font-semibold text-orange-600",children:r.CRITICAL||0}),e.jsx("div",{className:"text-orange-600",children:s("critical","Critical")})]}),e.jsxs("div",{className:"text-center p-2 rounded bg-yellow-100",children:[e.jsx("div",{className:"font-semibold text-yellow-600",children:r.HIGH||0}),e.jsx("div",{className:"text-yellow-600",children:s("high","High")})]})]}),e.jsx("div",{className:"flex-1 min-h-0",children:t.length===0?e.jsxs("div",{className:"text-center text-muted-foreground p-8",children:[e.jsx(c,{name:"AlertTriangle",className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:s("no-peak-events","No peak events in the last 24 hours")}),e.jsx("p",{className:"text-xs mt-1",children:s("no-peak-events-desc","This is good - your system is running smoothly")})]}):e.jsx(ee,{className:"h-[400px]",children:e.jsx("div",{className:"space-y-2 pr-4",children:t.map(a=>e.jsx(He,{event:a},`${a.node_id}-${a.seq}`))})})}),Object.keys(i).length>0&&e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("h4",{className:"text-xs font-medium mb-2 text-muted-foreground",children:s("event-categories","Event Categories")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(i).map(([a,l])=>e.jsxs(M,{variant:"secondary",className:`text-xs ${I(a)}`,children:[a,": ",l]},a))})]})]})})},Xe={traffic:{label:"Traffic",color:"#3b82f6"}},Ge=()=>{const{t:s}=p(),{data:t,isLoading:o,error:d}=De(5),m=a=>{if(a===0)return"0 B";const l=["B","KB","MB","GB","TB"],u=Math.floor(Math.log(a)/Math.log(1024));return Math.round(a/Math.pow(1024,u)*100)/100+" "+l[u]},n=a=>a.length>12?a.substring(0,10)+"...":a;if(d)return e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(c,{name:"TrendingUp"})," ",s("top-usage-nodes","Top Usage Nodes")]}),description:s("top-usage-nodes.desc","Nodes with highest traffic usage (last 24h)"),className:"h-full",children:e.jsx("div",{className:"text-center text-muted-foreground p-4",children:s("error-loading-usage","Error loading usage data")})});if(o)return e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(c,{name:"TrendingUp"})," ",s("top-usage-nodes","Top Usage Nodes")]}),description:s("top-usage-nodes.desc","Nodes with highest traffic usage (last 24h)"),className:"h-full",children:e.jsx("div",{className:"text-center text-muted-foreground p-4",children:s("loading","Loading...")})});if(t.length===0)return e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(c,{name:"TrendingUp"})," ",s("top-usage-nodes","Top Usage Nodes")]}),description:s("top-usage-nodes.desc","Nodes with highest traffic usage (last 24h)"),className:"h-full",children:e.jsxs("div",{className:"text-center text-muted-foreground p-8",children:[e.jsx(c,{name:"Server",className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:s("no-usage-data","No usage data available")}),e.jsx("p",{className:"text-xs mt-1",children:s("no-usage-data-desc","Node usage data will appear here once traffic starts flowing")})]})});const i=t.map((a,l)=>({name:n(a.nodeName),fullName:a.nodeName,traffic:a.totalTraffic,percentage:a.usagePercent,rank:l+1,uplink:a.uplink,downlink:a.downlink})),r=t.reduce((a,l)=>a+l.totalTraffic,0);return e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(v.TrendingUp,{})," ",s("top-usage-nodes","Top Usage Nodes")]}),description:s("top-usage-nodes.desc","Nodes with highest traffic usage (last 24h)"),className:"h-full",children:e.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("h4",{className:"text-sm font-medium mb-3 text-muted-foreground",children:s("traffic-distribution","Traffic Distribution")}),e.jsx(A,{config:Xe,className:"w-full h-[200px]",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(ae,{data:i,margin:{top:20,right:30,left:20,bottom:5},layout:"horizontal",children:[e.jsx(z,{type:"number",axisLine:!1,tickLine:!1,className:"text-xs fill-muted-foreground",tickFormatter:a=>m(a)}),e.jsx(X,{type:"category",dataKey:"name",axisLine:!1,tickLine:!1,className:"text-xs fill-muted-foreground"}),e.jsx(C,{content:({active:a,payload:l})=>{if(a&&l&&l.length){const u=l[0].payload;return e.jsxs("div",{className:"bg-background border rounded p-3 shadow-md min-w-[200px]",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:u.fullName}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Traffic:"}),e.jsx("span",{className:"font-medium",children:m(u.traffic)})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{children:"Usage:"}),e.jsxs("span",{className:"font-medium",children:[Math.round(u.percentage),"%"]})]}),e.jsxs("p",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(c,{name:"ArrowUp",className:"h-3 w-3"})," Uplink:"]}),e.jsx("span",{className:"font-medium",children:m(u.uplink)})]}),e.jsxs("p",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(c,{name:"ArrowDown",className:"h-3 w-3"})," Downlink:"]}),e.jsx("span",{className:"font-medium",children:m(u.downlink)})]})]})]})}return null}}),e.jsx(re,{dataKey:"traffic",fill:"var(--color-traffic)",radius:[0,4,4,0]})]})})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:s("detailed-ranking","Detailed Ranking")}),e.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:t.map((a,l)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-primary text-primary-foreground text-xs font-bold",children:["#",l+1]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-foreground",children:a.nodeName}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Node ID: ",a.nodeId]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium text-foreground",children:m(a.totalTraffic)}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[Math.round(a.usagePercent),"% of top usage"]})]})]},a.nodeId))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"text-center p-3 rounded bg-muted/30",children:[e.jsx("div",{className:"font-semibold text-foreground",children:m(r)}),e.jsx("div",{className:"text-muted-foreground",children:s("total-traffic","Total Traffic")})]}),e.jsxs("div",{className:"text-center p-3 rounded bg-muted/30",children:[e.jsx("div",{className:"font-semibold text-foreground",children:t.length}),e.jsx("div",{className:"text-muted-foreground",children:s("active-nodes","Active Nodes")})]})]})]})})},Ve=()=>{const{t:s}=p(),{data:t,isLoading:o,error:d}=Me(),{data:m}=Y(),[n,i]=T.useState([]),r={rx:{label:s("network.rx"),color:"#10b981"},tx:{label:s("network.tx"),color:"#3b82f6"}},a=(x,f=2)=>{if(x===0)return"0 B";const j=["B","KB","MB","GB","TB"],N=Math.floor(Math.log(x)/Math.log(1024));return parseFloat((x/Math.pow(1024,N)).toFixed(f))+" "+j[N]},l=x=>a(x)+"/s";T.useEffect(()=>{if(t&&!o&&!d){const x=new Date,f={timestamp:x.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),rx:parseInt(t.totalRxBytes)||0,tx:parseInt(t.totalTxBytes)||0,time:x.getTime()};i(j=>[...j,f].slice(-20))}},[t,o,d]);const u=parseInt(t?.totalRxBytes||"0"),g=parseInt(t?.totalTxBytes||"0");let b=0,L=0;if(n.length>=2){const x=n[n.length-1],f=n[n.length-2];if(x&&f&&typeof x.time=="number"&&typeof f.time=="number"){const j=(x.time-f.time)/1e3;j>0&&(b=Math.max(0,(x.rx-f.rx)/j),L=Math.max(0,(x.tx-f.tx)/j))}}const U=n.slice(-10).map((x,f,j)=>{let N=0,R=0;if(f>0&&j[f-1]&&x){const w=j[f-1];if(typeof x.time=="number"&&typeof w.time=="number"){const E=(x.time-w.time)/1e3;E>0&&(N=Math.max(0,(x.rx-w.rx)/E),R=Math.max(0,(x.tx-w.tx)/E))}}return{time:x.timestamp,rx:N,tx:R}});return d?e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(c,{name:"Network"})," ",s("network-activity","Network Activity")]}),description:s("network-activity.desc","Real-time network traffic monitoring"),className:"h-full",children:e.jsx("div",{className:"text-center text-muted-foreground p-4",children:s("error-loading-network","Error loading network data")})}):o?e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(c,{name:"Network"})," ",s("network-activity","Network Activity")]}),description:s("network-activity.desc","Real-time network traffic monitoring"),className:"h-full",children:e.jsx("div",{className:"text-center text-muted-foreground p-4",children:s("loading","Loading...")})}):e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(v.Network,{})," ",s("network-activity","Network Activity")]}),description:s("network-activity.desc","Real-time network traffic monitoring"),className:"h-full",children:e.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[e.jsxs("div",{className:"text-center p-3 rounded bg-green-100",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(c,{name:"ArrowDown",className:"h-4 w-4 text-green-600"})}),e.jsx("div",{className:"font-semibold text-green-600",children:a(u)}),e.jsx("div",{className:"text-green-600",children:s("total-received","Total RX")})]}),e.jsxs("div",{className:"text-center p-3 rounded bg-blue-100",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(c,{name:"ArrowUp",className:"h-4 w-4 text-blue-600"})}),e.jsx("div",{className:"font-semibold text-blue-600",children:a(g)}),e.jsx("div",{className:"text-blue-600",children:s("total-transmitted","Total TX")})]}),e.jsxs("div",{className:"text-center p-3 rounded bg-green-100",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(c,{name:"Activity",className:"h-4 w-4 text-green-600"})}),e.jsx("div",{className:"font-semibold text-green-600",children:l(b)}),e.jsx("div",{className:"text-green-600",children:s("rx-rate","RX Rate")})]}),e.jsxs("div",{className:"text-center p-3 rounded bg-blue-100",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(c,{name:"Activity",className:"h-4 w-4 text-blue-600"})}),e.jsx("div",{className:"font-semibold text-blue-600",children:l(L)}),e.jsx("div",{className:"text-blue-600",children:s("tx-rate","TX Rate")})]})]}),U.length>1&&e.jsxs("div",{className:"w-full",children:[e.jsx("h4",{className:"text-sm font-medium mb-3 text-muted-foreground",children:s("network-rates-overtime","Network Rates Over Time")}),e.jsx(A,{config:r,className:"w-full h-[200px]",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(je,{data:U,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(z,{dataKey:"time",axisLine:!1,tickLine:!1,className:"text-xs fill-muted-foreground",interval:"preserveStartEnd"}),e.jsx(X,{axisLine:!1,tickLine:!1,className:"text-xs fill-muted-foreground",tickFormatter:x=>l(x)}),e.jsx(C,{content:({active:x,payload:f,label:j})=>x&&f&&f.length?e.jsxs("div",{className:"bg-background border rounded p-3 shadow-md",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:j}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"flex justify-between items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-600"}),"RX Rate:"]}),e.jsx("span",{className:"font-medium",children:l(f[0]?.value||0)})]}),e.jsxs("p",{className:"flex justify-between items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-blue-600"}),"TX Rate:"]}),e.jsx("span",{className:"font-medium",children:l(f[1]?.value||0)})]})]})]}):null}),e.jsx(J,{type:"monotone",dataKey:"rx",stroke:"var(--color-rx)",strokeWidth:2,dot:!1}),e.jsx(J,{type:"monotone",dataKey:"tx",stroke:"var(--color-tx)",strokeWidth:2,dot:!1})]})})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{className:"text-center p-3 rounded bg-muted/30",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(c,{name:"Wifi",className:"h-4 w-4 text-muted-foreground"})}),e.jsx("div",{className:"font-semibold text-foreground",children:t?.activeInterfaces||0}),e.jsx("div",{className:"text-muted-foreground",children:s("active-interfaces","Active Interfaces")})]}),e.jsxs("div",{className:"text-center p-3 rounded bg-muted/30",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(c,{name:"Activity",className:"h-4 w-4 text-muted-foreground"})}),e.jsx("div",{className:"font-semibold text-foreground",children:m?.activeNodes||0}),e.jsx("div",{className:"text-muted-foreground",children:s("active-nodes","Active Nodes")})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),e.jsx("span",{children:s("updating-every-15s","Updating every 15 seconds")})]})]})})},S=({icon:s,label:t,value:o,subValue:d,subLabel:m,status:n="neutral"})=>{const i={success:"text-green-600",warning:"text-yellow-600",error:"text-red-600",neutral:"text-foreground"};return e.jsx("div",{className:"p-3 sm:p-4 rounded-lg border bg-card/50 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"text-muted-foreground flex-shrink-0",children:s}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`text-xl sm:text-2xl font-bold truncate ${i[n]}`,children:o||0}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:t}),d!==void 0&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 truncate",children:[d," ",m]})]})]})})},Ye=()=>{const{t:s}=p(),{data:t}=G(),{data:o}=ie(),{data:d}=le(),m=o?.total||0,n=o?.unhealthy||0,i=m===0?"neutral":n>0?"error":"success",r=t?.total||0,a=t?.active||0,l=r>0?Math.round(a/r*100):0,u=r===0?"neutral":l<50?"warning":"success";return e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(c,{name:"Activity"})," ",s("system-overview","System Overview")]}),description:s("page.home.system-overview.desc","Key system metrics at a glance"),className:"h-full",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-4 w-full",children:[e.jsx(S,{icon:e.jsx(c,{name:"Users",className:"h-5 w-5"}),label:s("total-users","Total Users"),value:r,subValue:t?.online||0,subLabel:s("online","online"),status:u}),e.jsx(S,{icon:e.jsx(c,{name:"Eye",className:"h-5 w-5"}),label:s("active-users","Active Users"),value:a,subValue:t?.expired||0,subLabel:s("expired","expired"),status:a>0?"success":"neutral"}),e.jsx(S,{icon:e.jsx(c,{name:"Server",className:"h-5 w-5"}),label:s("total-nodes","Total Nodes"),value:m,subValue:o?.healthy||0,subLabel:s("healthy","healthy"),status:i}),n>0&&e.jsx(S,{icon:e.jsx(c,{name:"AlertTriangle",className:"h-5 w-5"}),label:s("unhealthy-nodes","Issues"),value:n,subLabel:s("nodes-need-attention","nodes need attention"),status:"error"}),e.jsx(S,{icon:e.jsx(c,{name:"Shield",className:"h-5 w-5"}),label:s("total-admins","Total Admins"),value:d?.total||0,status:"neutral"}),(t?.limited||0)>0&&e.jsx(S,{icon:e.jsx(c,{name:"AlertTriangle",className:"h-5 w-5"}),label:s("limited-users","Data Limit Reached"),value:t?.limited||0,subLabel:s("users","users"),status:"warning"})]})})},Je=()=>{const{t:s}=p(),t=[{label:s("widgets.quick-actions.create-user"),icon:v.UserPlus,href:"/users/create",color:"bg-blue-500 hover:bg-blue-600",textColor:"text-white"},{label:s("widgets.quick-actions.add-node"),icon:v.Server,href:"/nodes/create",color:"bg-green-500 hover:bg-green-600",textColor:"text-white"},{label:s("widgets.quick-actions.new-service"),icon:v.Settings,href:"/services/create",color:"bg-purple-500 hover:bg-purple-600",textColor:"text-white"},{label:s("widgets.quick-actions.add-admin"),icon:v.Shield,href:"/admins/create",color:"bg-orange-500 hover:bg-orange-600",textColor:"text-white"}];return e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(c,{name:"Zap",className:"h-5 w-5"})," ",s("widgets.quick-actions.title")]}),description:s("widgets.quick-actions.desc"),className:"h-full",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 w-full",children:t.map(o=>{const d=o.icon;return e.jsx(Z,{to:o.href,children:e.jsxs(se,{className:`w-full h-16 sm:h-20 flex flex-col gap-2 ${o.color} ${o.textColor} transition-colors`,variant:"default",children:[e.jsx(d,{className:"h-5 w-5 sm:h-6 sm:w-6"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium",children:o.label})]})},o.href)})})})},Ze=()=>{const{t:s}=p(),{data:t,isLoading:o}=fe();return o?e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(c,{name:"Settings",className:"h-5 w-5"})," ",s("Subscription Settings")]}),description:s("Manage subscription configuration"),className:"h-full",children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})})}):e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(v.Settings,{className:"h-5 w-5"})," ",s("Subscription Settings")]}),description:s("Manage subscription configuration"),className:"h-full",children:e.jsxs("div",{className:"space-y-4 w-full",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{name:"Globe",className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Profile Title"})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:t?.profile_title||"Not set"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{name:"Clock",className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Update Interval"})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t?.update_interval||0," minutes"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{name:"Link2",className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Support Link"})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:t?.support_link?"Configured":"Not set"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{name:"Settings",className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Template on Accept"})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:t?.template_on_acceptance?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{name:"Settings",className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Rules Count"})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t?.rules?.length||0," rules"]})]})]}),e.jsx(te,{}),e.jsx("div",{className:"flex justify-center",children:e.jsx(Z,{to:"/settings",children:e.jsxs(se,{variant:"outline",className:"w-full",children:[e.jsx(c,{name:"Settings",className:"h-4 w-4 mr-2"}),"Configure Settings"]})})})]})})},es=()=>{const{t:s}=p(),{data:t,isLoading:o}=G(),d=t?.recent_subscription_updates||[];return o?e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(c,{name:"Bell",className:"h-5 w-5"})," ",s("widgets.recent_updates")]}),description:s("widgets.latest_subscription_changes"),className:"h-full",children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})})}):e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(v.Bell,{className:"h-5 w-5"})," ",s("widgets.recent_updates")]}),description:s("widgets.latest_subscription_changes"),className:"h-full",children:e.jsx("div",{className:"w-full",children:d.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(c,{name:"Bell",className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("widgets.no_recent_updates")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s("widgets.subscription_updates_will_appear")})]}):e.jsx(ee,{className:"h-[250px]",children:e.jsx("div",{className:"space-y-3",children:d.map((m,n)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start gap-3 p-2 rounded-lg bg-muted/50",children:[e.jsx(c,{name:"User",className:"h-4 w-4 text-muted-foreground mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:m||s("widgets.subscription_updated")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s("widgets.recently")})]})]}),n<d.length-1&&e.jsx(te,{className:"my-2"})]},n))})})})})};function ss(){return e.jsxs("div",{className:"p-4 rounded-lg bg-muted",children:[e.jsx("div",{className:"mb-4",children:e.jsx(D,{className:"h-6 w-1/4"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(D,{className:"h-32 w-full rounded"}),e.jsx(D,{className:"h-32 w-full rounded"}),e.jsx(D,{className:"h-32 w-full rounded"}),e.jsx(D,{className:"h-32 w-full rounded"})]})]})}const ts=T.lazy(()=>ue(()=>import("./index-BbOdj2ha.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19])).then(s=>({default:s.TotalTrafficsWidget}))),as=()=>e.jsx(T.Suspense,{fallback:e.jsx(ss,{}),children:e.jsx(ts,{})}),ce=()=>{const{t:s}=p(),{isWidgetVisible:t}=he(),{data:o}=G(),{data:d}=ie(),{data:m}=le(),{data:n}=We(),i=t("totalTraffics"),r=t("usersStats")&&o.total!==0,a=t("nodesStats")&&d.total!==0,l=t("adminsStats")&&m.total!==0,u=t("allBackendsStats")&&n&&n.totalBackends>0,g=t("systemOverview"),b=t("hostSystemMetrics"),L=t("peakEvents"),U=t("topUsageNodes"),x=t("networkActivity"),f=t("quickActions"),j=t("subscriptionSettings"),N=t("recentSubscriptionUpdates"),w=[i,r,a,l,u,g,b,L,U,x,f,j,N].filter(Boolean).length>0;return e.jsx(ge,{className:"flex flex-col gap-4 w-full",title:s("home"),children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[i&&e.jsx("div",{className:r||g?"md:col-span-8":"md:col-span-12",children:e.jsx(k,{widgetName:s("widget-names.traffic-analytics"),children:e.jsx(as,{})})}),r&&e.jsx("div",{className:i?"md:col-span-4":"md:col-span-6",children:e.jsx(Te,{...o})}),g&&e.jsx("div",{className:i?"md:col-span-4":"md:col-span-12",children:e.jsx(Ye,{})}),a&&e.jsx("div",{className:"md:col-span-4",children:e.jsx(Fe,{...d})}),u&&n&&e.jsx("div",{className:"md:col-span-4",children:e.jsx(Pe,{...n})}),l&&e.jsx("div",{className:"md:col-span-4",children:e.jsx(ye,{...m})}),b&&e.jsx("div",{className:"md:col-span-6",children:e.jsx(k,{widgetName:s("widget-names.host-system-metrics"),children:e.jsx(qe,{})})}),L&&e.jsx("div",{className:"md:col-span-6",children:e.jsx(k,{widgetName:s("widget-names.peak-events"),children:e.jsx(ze,{})})}),U&&e.jsx("div",{className:"md:col-span-6",children:e.jsx(k,{widgetName:s("widget-names.top-usage-nodes"),children:e.jsx(Ge,{})})}),x&&e.jsx("div",{className:"md:col-span-6",children:e.jsx(k,{widgetName:s("widget-names.network-activity"),children:e.jsx(Ve,{})})}),f&&e.jsx("div",{className:"md:col-span-4",children:e.jsx(k,{widgetName:s("widget-names.quick-actions"),children:e.jsx(Je,{})})}),j&&e.jsx("div",{className:"md:col-span-4",children:e.jsx(Ze,{})}),N&&e.jsx("div",{className:"md:col-span-4",children:e.jsx(es,{})}),!w&&e.jsx("div",{className:"md:col-span-12 flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:s("dashboard.no-widgets-configured")}),e.jsx("p",{children:s("dashboard.configure-widgets-description")})]})})]})})},rs=de("/_dashboard/")({component:()=>e.jsx(ce,{})}),gs=Object.freeze(Object.defineProperty({__proto__:null,DashboardPage:ce,Route:rs},Symbol.toStringTag,{value:"Module"}));export{ss as U,gs as i};
