import{r as N,j as s}from"./react-core-Bcdk_OeX.js";import{az as P,aA as C,aB as D,aC as k,aD as q,aE as z,aF as B,aJ as S,aI as V,j as I,aN as O,aO as R}from"./index-D9xJNTt9.js";import"./layout-Y81SaLgb.js";import{d as A}from"./react-ecosystem-DA9e0y3F.js";import"./dnd-kit-BufO2FBr.js";import{u as J}from"./query-BGTG4bZD.js";function H({fetchEntity:p,columns:n,primaryFilter:g,rowSelection:j,entityKey:e,onCreate:o,onOpen:b,CardComponent:h,cardActions:y}){const{t:E}=A(),t=P({column:g}),i=C(),r=D(),F=k(),{onPaginationChange:T,pageIndex:c,pageSize:u}=q({entityKey:e}),v=[e,{page:c,size:u},t.columnFilters,{sortBy:r.sorting[0]?.id||"created_at",desc:r.sorting[0]?.desc??!0},{filters:i.columnsFilter}],{data:l,isFetching:m,error:x,isError:d,refetch:f}=J({queryFn:p,queryKey:v,initialData:{entities:[],pageCount:0}}),a=z({data:l,columns:n,pageSize:u,pageIndex:c,rowSelection:j,visibility:F,sorting:r,onPaginationChange:T}),w=N.useMemo(()=>({entityKey:e,table:a,data:l.entities,primaryFilter:t,filters:i,isLoading:m,error:x||null,isError:d,refetch:f}),[e,a,l.entities,i,t,m,x,d,f]);return s.jsx(B.Provider,{value:w,children:s.jsxs("div",{className:"flex w-full flex-col",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between py-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[s.jsx(S,{}),s.jsx(V,{table:a})]}),o&&s.jsx(I,{"aria-label":`create-${e}`,onClick:o,className:"shrink-0",children:E("create")})]}),s.jsxs("div",{className:"w-full rounded-md border",children:[s.jsx(O,{columns:n,onRowClick:b,CardComponent:h,cardActions:y}),s.jsx(R,{table:a})]})]})})}export{H as E};
