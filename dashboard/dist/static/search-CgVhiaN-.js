import{u as z,a as O,R as Ee,b as ke,O as Re,C as xe,c as X}from"./react-ecosystem-DA9e0y3F.js";import{r as n}from"./react-core-Bcdk_OeX.js";var se=1,Se=.9,Ie=.8,Ce=.17,ee=.1,te=.999,Ae=.9999,Me=.99,De=/[\\\/_+.#"@\[\(\{&]/,$e=/[\\\/_+.#"@\[\(\{&]/g,Fe=/[\s-]/,ve=/[\s-]/g;function ne(e,l,r,d,a,u,o){if(u===l.length)return a===e.length?se:Me;var f=`${a},${u}`;if(o[f]!==void 0)return o[f];for(var v=d.charAt(u),c=r.indexOf(v,a),p=0,h,x,E,C;c>=0;)h=ne(e,l,r,d,c+1,u+1,o),h>p&&(c===a?h*=se:De.test(e.charAt(c-1))?(h*=Ie,E=e.slice(a,c-1).match($e),E&&a>0&&(h*=Math.pow(te,E.length))):Fe.test(e.charAt(c-1))?(h*=Se,C=e.slice(a,c-1).match(ve),C&&a>0&&(h*=Math.pow(te,C.length))):(h*=Ce,a>0&&(h*=Math.pow(te,c-a))),e.charAt(c)!==l.charAt(u)&&(h*=Ae)),(h<ee&&r.charAt(c-1)===d.charAt(u+1)||d.charAt(u+1)===d.charAt(u)&&r.charAt(c-1)!==d.charAt(u))&&(x=ne(e,l,r,d,c+1,u+2,o),x*ee>h&&(h=x*ee)),h>p&&(p=h),c=r.indexOf(v,c+1);return o[f]=p,p}function de(e){return e.toLowerCase().replace(ve," ")}function Ke(e,l,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,ne(e,l,de(e),de(l),0,0,{})}var J='[cmdk-group=""]',re='[cmdk-group-items=""]',qe='[cmdk-group-heading=""]',me='[cmdk-item=""]',fe=`${me}:not([aria-disabled="true"])`,le="cmdk-item-select",W="data-value",Oe=(e,l,r)=>Ke(e,l,r),pe=n.createContext(void 0),Y=()=>n.useContext(pe),he=n.createContext(void 0),ue=()=>n.useContext(he),ge=n.createContext(void 0),be=n.forwardRef((e,l)=>{let r=B(()=>{var t,s;return{search:"",value:(s=(t=e.value)!=null?t:e.defaultValue)!=null?s:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),d=B(()=>new Set),a=B(()=>new Map),u=B(()=>new Map),o=B(()=>new Set),f=we(e),{label:v,children:c,value:p,onValueChange:h,filter:x,shouldFilter:E,loop:C,disablePointerSelection:F=!1,vimBindings:A=!0,...P}=e,D=z(),U=z(),T=z(),$=n.useRef(null),b=Ne();j(()=>{if(p!==void 0){let t=p.trim();r.current.value=t,R.emit()}},[p]),j(()=>{b(6,y)},[]);let R=n.useMemo(()=>({subscribe:t=>(o.current.add(t),()=>o.current.delete(t)),snapshot:()=>r.current,setState:(t,s,m)=>{var i,g,w,I;if(!Object.is(r.current[t],s)){if(r.current[t]=s,t==="search")K(),V(),b(1,N);else if(t==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let S=document.getElementById(T);S?S.focus():(i=document.getElementById(D))==null||i.focus()}if(b(7,()=>{var S;r.current.selectedItemId=(S=k())==null?void 0:S.id,R.emit()}),m||b(5,y),((g=f.current)==null?void 0:g.value)!==void 0){let S=s??"";(I=(w=f.current).onValueChange)==null||I.call(w,S);return}}R.emit()}},emit:()=>{o.current.forEach(t=>t())}}),[]),L=n.useMemo(()=>({value:(t,s,m)=>{var i;s!==((i=u.current.get(t))==null?void 0:i.value)&&(u.current.set(t,{value:s,keywords:m}),r.current.filtered.items.set(t,H(s,m)),b(2,()=>{V(),R.emit()}))},item:(t,s)=>(d.current.add(t),s&&(a.current.has(s)?a.current.get(s).add(t):a.current.set(s,new Set([t]))),b(3,()=>{K(),V(),r.current.value||N(),R.emit()}),()=>{u.current.delete(t),d.current.delete(t),r.current.filtered.items.delete(t);let m=k();b(4,()=>{K(),m?.getAttribute("id")===t&&N(),R.emit()})}),group:t=>(a.current.has(t)||a.current.set(t,new Set),()=>{u.current.delete(t),a.current.delete(t)}),filter:()=>f.current.shouldFilter,label:v||e["aria-label"],getDisablePointerSelection:()=>f.current.disablePointerSelection,listId:D,inputId:T,labelId:U,listInnerRef:$}),[]);function H(t,s){var m,i;let g=(i=(m=f.current)==null?void 0:m.filter)!=null?i:Oe;return t?g(t,r.current.search,s):0}function V(){if(!r.current.search||f.current.shouldFilter===!1)return;let t=r.current.filtered.items,s=[];r.current.filtered.groups.forEach(i=>{let g=a.current.get(i),w=0;g.forEach(I=>{let S=t.get(I);w=Math.max(S,w)}),s.push([i,w])});let m=$.current;M().sort((i,g)=>{var w,I;let S=i.getAttribute("id"),Q=g.getAttribute("id");return((w=t.get(Q))!=null?w:0)-((I=t.get(S))!=null?I:0)}).forEach(i=>{let g=i.closest(re);g?g.appendChild(i.parentElement===g?i:i.closest(`${re} > *`)):m.appendChild(i.parentElement===m?i:i.closest(`${re} > *`))}),s.sort((i,g)=>g[1]-i[1]).forEach(i=>{var g;let w=(g=$.current)==null?void 0:g.querySelector(`${J}[${W}="${encodeURIComponent(i[0])}"]`);w?.parentElement.appendChild(w)})}function N(){let t=M().find(m=>m.getAttribute("aria-disabled")!=="true"),s=t?.getAttribute(W);R.setState("value",s||void 0)}function K(){var t,s,m,i;if(!r.current.search||f.current.shouldFilter===!1){r.current.filtered.count=d.current.size;return}r.current.filtered.groups=new Set;let g=0;for(let w of d.current){let I=(s=(t=u.current.get(w))==null?void 0:t.value)!=null?s:"",S=(i=(m=u.current.get(w))==null?void 0:m.keywords)!=null?i:[],Q=H(I,S);r.current.filtered.items.set(w,Q),Q>0&&g++}for(let[w,I]of a.current)for(let S of I)if(r.current.filtered.items.get(S)>0){r.current.filtered.groups.add(w);break}r.current.filtered.count=g}function y(){var t,s,m;let i=k();i&&(((t=i.parentElement)==null?void 0:t.firstChild)===i&&((m=(s=i.closest(J))==null?void 0:s.querySelector(qe))==null||m.scrollIntoView({block:"nearest"})),i.scrollIntoView({block:"nearest"}))}function k(){var t;return(t=$.current)==null?void 0:t.querySelector(`${me}[aria-selected="true"]`)}function M(){var t;return Array.from(((t=$.current)==null?void 0:t.querySelectorAll(fe))||[])}function G(t){let s=M()[t];s&&R.setState("value",s.getAttribute(W))}function _(t){var s;let m=k(),i=M(),g=i.findIndex(I=>I===m),w=i[g+t];(s=f.current)!=null&&s.loop&&(w=g+t<0?i[i.length-1]:g+t===i.length?i[0]:i[g+t]),w&&R.setState("value",w.getAttribute(W))}function ae(t){let s=k(),m=s?.closest(J),i;for(;m&&!i;)m=t>0?Ue(m,J):He(m,J),i=m?.querySelector(fe);i?R.setState("value",i.getAttribute(W)):_(t)}let ie=()=>G(M().length-1),ce=t=>{t.preventDefault(),t.metaKey?ie():t.altKey?ae(1):_(1)},oe=t=>{t.preventDefault(),t.metaKey?G(0):t.altKey?ae(-1):_(-1)};return n.createElement(O.div,{ref:l,tabIndex:-1,...P,"cmdk-root":"",onKeyDown:t=>{var s;(s=P.onKeyDown)==null||s.call(P,t);let m=t.nativeEvent.isComposing||t.keyCode===229;if(!(t.defaultPrevented||m))switch(t.key){case"n":case"j":{A&&t.ctrlKey&&ce(t);break}case"ArrowDown":{ce(t);break}case"p":case"k":{A&&t.ctrlKey&&oe(t);break}case"ArrowUp":{oe(t);break}case"Home":{t.preventDefault(),G(0);break}case"End":{t.preventDefault(),ie();break}case"Enter":{t.preventDefault();let i=k();if(i){let g=new Event(le);i.dispatchEvent(g)}}}}},n.createElement("label",{"cmdk-label":"",htmlFor:L.inputId,id:L.labelId,style:Je},v),Z(e,t=>n.createElement(he.Provider,{value:R},n.createElement(pe.Provider,{value:L},t))))}),Pe=n.forwardRef((e,l)=>{var r,d;let a=z(),u=n.useRef(null),o=n.useContext(ge),f=Y(),v=we(e),c=(d=(r=v.current)==null?void 0:r.forceMount)!=null?d:o?.forceMount;j(()=>{if(!c)return f.item(a,o?.id)},[c]);let p=ye(a,u,[e.value,e.children,u],e.keywords),h=ue(),x=q(b=>b.value&&b.value===p.current),E=q(b=>c||f.filter()===!1?!0:b.search?b.filtered.items.get(a)>0:!0);n.useEffect(()=>{let b=u.current;if(!(!b||e.disabled))return b.addEventListener(le,C),()=>b.removeEventListener(le,C)},[E,e.onSelect,e.disabled]);function C(){var b,R;F(),(R=(b=v.current).onSelect)==null||R.call(b,p.current)}function F(){h.setState("value",p.current,!0)}if(!E)return null;let{disabled:A,value:P,onSelect:D,forceMount:U,keywords:T,...$}=e;return n.createElement(O.div,{ref:X(u,l),...$,id:a,"cmdk-item":"",role:"option","aria-disabled":!!A,"aria-selected":!!x,"data-disabled":!!A,"data-selected":!!x,onPointerMove:A||f.getDisablePointerSelection()?void 0:F,onClick:A?void 0:C},e.children)}),Te=n.forwardRef((e,l)=>{let{heading:r,children:d,forceMount:a,...u}=e,o=z(),f=n.useRef(null),v=n.useRef(null),c=z(),p=Y(),h=q(E=>a||p.filter()===!1?!0:E.search?E.filtered.groups.has(o):!0);j(()=>p.group(o),[]),ye(o,f,[e.value,e.heading,v]);let x=n.useMemo(()=>({id:o,forceMount:a}),[a]);return n.createElement(O.div,{ref:X(f,l),...u,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},r&&n.createElement("div",{ref:v,"cmdk-group-heading":"","aria-hidden":!0,id:c},r),Z(e,E=>n.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?c:void 0},n.createElement(ge.Provider,{value:x},E))))}),Ve=n.forwardRef((e,l)=>{let{alwaysRender:r,...d}=e,a=n.useRef(null),u=q(o=>!o.search);return!r&&!u?null:n.createElement(O.div,{ref:X(a,l),...d,"cmdk-separator":"",role:"separator"})}),je=n.forwardRef((e,l)=>{let{onValueChange:r,...d}=e,a=e.value!=null,u=ue(),o=q(c=>c.search),f=q(c=>c.selectedItemId),v=Y();return n.useEffect(()=>{e.value!=null&&u.setState("search",e.value)},[e.value]),n.createElement(O.input,{ref:l,...d,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":v.listId,"aria-labelledby":v.labelId,"aria-activedescendant":f,id:v.inputId,type:"text",value:a?e.value:o,onChange:c=>{a||u.setState("search",c.target.value),r?.(c.target.value)}})}),Le=n.forwardRef((e,l)=>{let{children:r,label:d="Suggestions",...a}=e,u=n.useRef(null),o=n.useRef(null),f=q(c=>c.selectedItemId),v=Y();return n.useEffect(()=>{if(o.current&&u.current){let c=o.current,p=u.current,h,x=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let E=c.offsetHeight;p.style.setProperty("--cmdk-list-height",E.toFixed(1)+"px")})});return x.observe(c),()=>{cancelAnimationFrame(h),x.unobserve(c)}}},[]),n.createElement(O.div,{ref:X(u,l),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":f,"aria-label":d,id:v.listId},Z(e,c=>n.createElement("div",{ref:X(o,v.listInnerRef),"cmdk-list-sizer":""},c)))}),We=n.forwardRef((e,l)=>{let{open:r,onOpenChange:d,overlayClassName:a,contentClassName:u,container:o,...f}=e;return n.createElement(Ee,{open:r,onOpenChange:d},n.createElement(ke,{container:o},n.createElement(Re,{"cmdk-overlay":"",className:a}),n.createElement(xe,{"aria-label":e.label,"cmdk-dialog":"",className:u},n.createElement(be,{ref:l,...f}))))}),Be=n.forwardRef((e,l)=>q(r=>r.filtered.count===0)?n.createElement(O.div,{ref:l,...e,"cmdk-empty":"",role:"presentation"}):null),ze=n.forwardRef((e,l)=>{let{progress:r,children:d,label:a="Loading...",...u}=e;return n.createElement(O.div,{ref:l,...u,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},Z(e,o=>n.createElement("div",{"aria-hidden":!0},o)))}),_e=Object.assign(be,{List:Le,Item:Pe,Input:je,Group:Te,Separator:Ve,Dialog:We,Empty:Be,Loading:ze});function Ue(e,l){let r=e.nextElementSibling;for(;r;){if(r.matches(l))return r;r=r.nextElementSibling}}function He(e,l){let r=e.previousElementSibling;for(;r;){if(r.matches(l))return r;r=r.previousElementSibling}}function we(e){let l=n.useRef(e);return j(()=>{l.current=e}),l}var j=typeof window>"u"?n.useEffect:n.useLayoutEffect;function B(e){let l=n.useRef();return l.current===void 0&&(l.current=e()),l}function q(e){let l=ue(),r=()=>e(l.snapshot());return n.useSyncExternalStore(l.subscribe,r,r)}function ye(e,l,r,d=[]){let a=n.useRef(),u=Y();return j(()=>{var o;let f=(()=>{var c;for(let p of r){if(typeof p=="string")return p.trim();if(typeof p=="object"&&"current"in p)return p.current?(c=p.current.textContent)==null?void 0:c.trim():a.current}})(),v=d.map(c=>c.trim());u.value(e,f,v),(o=l.current)==null||o.setAttribute(W,f),a.current=f}),a}var Ne=()=>{let[e,l]=n.useState(),r=B(()=>new Map);return j(()=>{r.current.forEach(d=>d()),r.current=new Map},[e]),(d,a)=>{r.current.set(d,a),l({})}};function Ge(e){let l=e.type;return typeof l=="function"?l(e.props):"render"in l?l.render(e.props):e}function Z({asChild:e,children:l},r){return e&&n.isValidElement(l)?n.cloneElement(Ge(l),{ref:l.ref},r(l.props.children)):r(l)}var Je={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Xe(e,l,r,d){var a=this,u=n.useRef(null),o=n.useRef(0),f=n.useRef(0),v=n.useRef(null),c=n.useRef([]),p=n.useRef(),h=n.useRef(),x=n.useRef(e),E=n.useRef(!0);x.current=e;var C=typeof window<"u",F=!l&&l!==0&&C;if(typeof e!="function")throw new TypeError("Expected a function");l=+l||0;var A=!!(r=r||{}).leading,P=!("trailing"in r)||!!r.trailing,D="maxWait"in r,U="debounceOnServer"in r&&!!r.debounceOnServer,T=D?Math.max(+r.maxWait||0,l):null;n.useEffect(function(){return E.current=!0,function(){E.current=!1}},[]);var $=n.useMemo(function(){var b=function(y){var k=c.current,M=p.current;return c.current=p.current=null,o.current=y,f.current=f.current||y,h.current=x.current.apply(M,k)},R=function(y,k){F&&cancelAnimationFrame(v.current),v.current=F?requestAnimationFrame(y):setTimeout(y,k)},L=function(y){if(!E.current)return!1;var k=y-u.current;return!u.current||k>=l||k<0||D&&y-o.current>=T},H=function(y){return v.current=null,P&&c.current?b(y):(c.current=p.current=null,h.current)},V=function y(){var k=Date.now();if(A&&f.current===o.current&&N(),L(k))return H(k);if(E.current){var M=l-(k-u.current),G=D?Math.min(M,T-(k-o.current)):M;R(y,G)}},N=function(){d&&d({})},K=function(){if(C||U){var y=Date.now(),k=L(y);if(c.current=[].slice.call(arguments),p.current=a,u.current=y,k){if(!v.current&&E.current)return o.current=u.current,R(V,l),A?b(u.current):h.current;if(D)return R(V,l),b(u.current)}return v.current||R(V,l),h.current}};return K.cancel=function(){var y=v.current;y&&(F?cancelAnimationFrame(v.current):clearTimeout(v.current)),o.current=0,c.current=u.current=p.current=v.current=null,y&&d&&d({})},K.isPending=function(){return!!v.current},K.flush=function(){return v.current?H(Date.now()):h.current},K},[A,D,l,T,P,F,C,U,d]);return $}function Ye(e,l){return e===l}function et(e,l,r){var d=Ye,a=n.useRef(e),u=n.useState({})[1],o=Xe(n.useCallback(function(v){a.current=v,u({})},[u]),l,r,u),f=n.useRef(e);return d(f.current,e)||(o(e),f.current=e),[a.current,o]}export{_e as _,et as a,Xe as c};
